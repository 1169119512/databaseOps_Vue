# é«˜çº§ç­›é€‰æ“ä½œç¬¦è¯´æ˜

## ğŸ“Œ é—®é¢˜å‘ç°

åŸå®ç°ä¸åç«¯ API æ–‡æ¡£è§„èŒƒ**ä¸å®Œå…¨ä¸€è‡´**ï¼Œå¯èƒ½å¯¼è‡´æŸ¥è¯¢å¤±è´¥æˆ–ç»“æœä¸æ­£ç¡®ã€‚

---

## ğŸ” å¯¹æ¯”åˆ†æ

### 1. **æ•°å€¼å­—æ®µï¼ˆINTã€DECIMALï¼‰- ç­‰äºæ“ä½œ**

| ç±»å‹ | API æ–‡æ¡£è¦æ±‚ | ä¿®å¤å‰ | ä¿®å¤å | çŠ¶æ€ |
|------|------------|--------|--------|------|
| ç­‰äº | `å­—æ®µå_eq` | `å­—æ®µå` âŒ | `å­—æ®µå_eq` âœ… | **å·²ä¿®å¤** |

**ç¤ºä¾‹**ï¼š
```javascript
// æŸ¥è¯¢ ZBXH = 10 çš„è®°å½•

// ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰
{ ZBXH: 10 }  // åç«¯å¯èƒ½æ— æ³•è¯†åˆ«

// ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰
{ ZBXH_eq: 10 }  // âœ“ ç¬¦åˆ API è§„èŒƒ
```

---

### 2. **å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰- æ¨¡ç³ŠæŸ¥è¯¢**

| ç±»å‹ | API æ–‡æ¡£è¦æ±‚ | ä¿®å¤å‰ | ä¿®å¤å | çŠ¶æ€ |
|------|------------|--------|--------|------|
| æ¨¡ç³ŠæŸ¥è¯¢ | `å­—æ®µå` | `å­—æ®µå_like` âŒ | `å­—æ®µå` âœ… | **å·²ä¿®å¤** |

**ç¤ºä¾‹**ï¼š
```javascript
// æŸ¥è¯¢ GYSMC åŒ…å« "ç§‘æŠ€" çš„è®°å½•

// ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰
{ GYSMC_like: "ç§‘æŠ€" }  // åç«¯å¯èƒ½æ— æ³•è¯†åˆ«

// ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰
{ GYSMC: "ç§‘æŠ€" }  // âœ“ ç¬¦åˆ API è§„èŒƒ
```

---

### 3. **æ—¥æœŸå­—æ®µï¼ˆDATE/TIMESTAMPï¼‰- èŒƒå›´æŸ¥è¯¢**

| ç±»å‹ | API æ–‡æ¡£è¦æ±‚ | åŸå®ç° | çŠ¶æ€ |
|------|------------|--------|------|
| å¼€å§‹æ—¥æœŸ | `å­—æ®µå_start` | `å­—æ®µå_start` âœ… | **æ— éœ€ä¿®æ”¹** |
| ç»“æŸæ—¥æœŸ | `å­—æ®µå_end` | `å­—æ®µå_end` âœ… | **æ— éœ€ä¿®æ”¹** |

**ç¤ºä¾‹**ï¼š
```javascript
// æŸ¥è¯¢ CLSJ åœ¨ 2020-01-01 åˆ° 2024-12-31 ä¹‹é—´çš„è®°å½•
{
  CLSJ_start: "2020-01-01",
  CLSJ_end: "2024-12-31"
}
// âœ“ åŸå®ç°æ­£ç¡®
```

---

## ğŸ“‹ å®Œæ•´æ“ä½œç¬¦åˆ—è¡¨

æ ¹æ® **API æ–‡æ¡£ (api.markdown ç¬¬ 279-293 è¡Œ)**ï¼š

### æ•°å€¼å­—æ®µï¼ˆINTã€DECIMALï¼‰

| æ“ä½œç¬¦ | åç¼€ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|
| å¤§äº | `_gt` | Greater Than | `ZBXH_gt=10` |
| å¤§äºç­‰äº | `_gte` | Greater Than or Equal | `ZBXH_gte=10` |
| å°äº | `_lt` | Less Than | `ZBXH_lt=100` |
| å°äºç­‰äº | `_lte` | Less Than or Equal | `ZBXH_lte=100` |
| ç­‰äº | `_eq` | Equal | `ZBXH_eq=50` |

### å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰

| æ“ä½œ | æ ¼å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| æ¨¡ç³ŠæŸ¥è¯¢ | ç›´æ¥ä½¿ç”¨å­—æ®µå | LIKE %value% | `GYSMC=ç§‘æŠ€` |

### æ—¥æœŸ/æ—¶é—´å­—æ®µï¼ˆTIMESTAMPã€DATEï¼‰

| æ“ä½œç¬¦ | åç¼€ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|
| å¼€å§‹æ—¶é—´ | `_start` | >= start_date | `CLSJ_start=2020-01-01` |
| ç»“æŸæ—¶é—´ | `_end` | <= end_date | `CLSJ_end=2024-12-31` |

---

## ğŸŒ å®é™…æŸ¥è¯¢ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå¤æ‚ç»„åˆæŸ¥è¯¢

**å‰ç«¯ç­›é€‰æ¡ä»¶**ï¼š
- ZBXH >= 10 ä¸” <= 100
- GYSMC åŒ…å« "ç§‘æŠ€"
- CLSJ åœ¨ 2020-01-01 åˆ° 2024-12-31

**ç”Ÿæˆçš„æŸ¥è¯¢å‚æ•°**ï¼ˆä¿®å¤åï¼‰ï¼š
```javascript
{
  page: 1,
  page_size: 10,
  ZBXH_gte: 10,
  ZBXH_lte: 100,
  GYSMC: "ç§‘æŠ€",
  CLSJ_start: "2020-01-01",
  CLSJ_end: "2024-12-31"
}
```

**å®é™… URL**ï¼š
```
GET /api/supplier-archive/?page=1&page_size=10&ZBXH_gte=10&ZBXH_lte=100&GYSMC=ç§‘æŠ€&CLSJ_start=2020-01-01&CLSJ_end=2024-12-31
```

---

### ç¤ºä¾‹ 2ï¼šæ•°å€¼ç²¾ç¡®æŸ¥è¯¢

**å‰ç«¯ç­›é€‰æ¡ä»¶**ï¼š
- ZBXH = 42

**ç”Ÿæˆçš„æŸ¥è¯¢å‚æ•°**ï¼š
```javascript
{
  page: 1,
  page_size: 10,
  ZBXH_eq: 42  // âœ… ä½¿ç”¨ _eq åç¼€
}
```

**å®é™… URL**ï¼š
```
GET /api/supplier-archive/?page=1&page_size=10&ZBXH_eq=42
```

---

## ğŸ”§ ä»£ç ä¿®æ”¹è¯¦æƒ…

**æ–‡ä»¶**: `src/api/database.js`

**ä¿®æ”¹ä½ç½®**: `buildQueryParams` æ–¹æ³•

### ä¿®æ”¹ 1ï¼šæ•°å€¼ç­‰äºæ“ä½œ

```javascript
// ä¿®å¤å‰
case '=':
  params[key] = value
  break

// ä¿®å¤å
case '=':
  params[`${key}_eq`] = value  // âœ… æ·»åŠ  _eq åç¼€
  break
```

### ä¿®æ”¹ 2ï¼šå­—ç¬¦ä¸²æ¨¡ç³ŠæŸ¥è¯¢

```javascript
// ä¿®å¤å‰
case 'varchar':
  params[`${key}_like`] = value
  break

// ä¿®å¤å
case 'varchar':
  params[key] = value  // âœ… ç›´æ¥ä½¿ç”¨å­—æ®µå
  break
```

---

## âœ… éªŒè¯æ¸…å•

- [x] æ•°å€¼å­—æ®µå¤§äºæ“ä½œï¼ˆ`_gt`ï¼‰- åŸå®ç°æ­£ç¡®
- [x] æ•°å€¼å­—æ®µå¤§äºç­‰äºæ“ä½œï¼ˆ`_gte`ï¼‰- åŸå®ç°æ­£ç¡®
- [x] æ•°å€¼å­—æ®µå°äºæ“ä½œï¼ˆ`_lt`ï¼‰- åŸå®ç°æ­£ç¡®
- [x] æ•°å€¼å­—æ®µå°äºç­‰äºæ“ä½œï¼ˆ`_lte`ï¼‰- åŸå®ç°æ­£ç¡®
- [x] æ•°å€¼å­—æ®µç­‰äºæ“ä½œï¼ˆ`_eq`ï¼‰- **å·²ä¿®å¤**
- [x] å­—ç¬¦ä¸²æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆç›´æ¥å­—æ®µåï¼‰- **å·²ä¿®å¤**
- [x] æ—¥æœŸå¼€å§‹æ—¶é—´ï¼ˆ`_start`ï¼‰- åŸå®ç°æ­£ç¡®
- [x] æ—¥æœŸç»“æŸæ—¶é—´ï¼ˆ`_end`ï¼‰- åŸå®ç°æ­£ç¡®

---

## ğŸ¯ å½±å“èŒƒå›´

**ä¿®å¤å‰å¯èƒ½çš„é—®é¢˜**ï¼š
1. âŒ æ•°å€¼ç²¾ç¡®æŸ¥è¯¢ï¼ˆç­‰äºï¼‰å¯èƒ½å¤±è´¥
2. âŒ å­—ç¬¦ä¸²æ¨¡ç³ŠæŸ¥è¯¢å¯èƒ½è¿”å›ç©ºç»“æœ

**ä¿®å¤å**ï¼š
1. âœ… æ‰€æœ‰æŸ¥è¯¢æ“ä½œç¬¦å®Œå…¨ç¬¦åˆåç«¯ API è§„èŒƒ
2. âœ… æŸ¥è¯¢ç»“æœå‡†ç¡®å¯é 
3. âœ… ä¸ api.markdown æ–‡æ¡£å®Œå…¨ä¸€è‡´

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- **API æ–‡æ¡£**: `.specstory/api.markdown` ç¬¬ 279-293 è¡Œ
- **å®ç°ä»£ç **: `src/api/database.js` ç¬¬ 17-70 è¡Œ
- **å‰ç«¯ç»„ä»¶**: `src/components/AdvancedFilter.vue`
- **ä½¿ç”¨é¡µé¢**: `src/views/TableManager.vue`

---

## ğŸ’¡ åç»­å»ºè®®

1. **æµ‹è¯•éªŒè¯**: å»ºè®®åœ¨å®é™…ç¯å¢ƒä¸­æµ‹è¯•æ‰€æœ‰ç­›é€‰æ“ä½œç¬¦
2. **æ–‡æ¡£åŒæ­¥**: ç¡®ä¿å‰ç«¯ä»£ç ã€åç«¯ APIã€æ–‡æ¡£ä¸‰è€…ä¿æŒä¸€è‡´
3. **å•å…ƒæµ‹è¯•**: ä¸º `buildQueryParams` æ–¹æ³•æ·»åŠ å•å…ƒæµ‹è¯•
4. **ä»£ç æ³¨é‡Š**: åœ¨å…³é”®ä½ç½®æ·»åŠ æ³¨é‡Šè¯´æ˜æ“ä½œç¬¦è§„èŒƒ

---

## ğŸš€ å¦‚ä½•æµ‹è¯•

1. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š`npm run dev`
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
3. è¿›å…¥"æ•°æ®åº“è¿æ¥ç®¡ç†" â†’ é€‰æ‹©ä»»æ„è¡¨
4. ä½¿ç”¨é«˜çº§ç­›é€‰åŠŸèƒ½
5. åœ¨ Network æ ‡ç­¾æŸ¥çœ‹å®é™…å‘é€çš„è¯·æ±‚å‚æ•°
6. éªŒè¯å‚æ•°æ ¼å¼æ˜¯å¦ç¬¦åˆ API è§„èŒƒ

---

**æœ€åæ›´æ–°**: 2025-11-17  
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶éªŒè¯

